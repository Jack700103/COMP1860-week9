CHIP TrafficLight3 {
    IN PowerOn;
    OUT X[3];
    PARTS:
    DFF(in=nextS0, out=S0);
    DFF(in=nextS1, out=S1);
    
    Not(in=S0, out=notS0);
    Xor(a=S1, b=S0, out=xorOut);
    Mux(a=notS0, b=false, sel=PowerOn, out=nextS0);
    Mux(a=xorOut, b=false, sel=PowerOn, out=nextS1);
    
    Not(in=S1, out=X[2]);
    Or(a=S0, b=false, out=X[1]);
    And(a=S1, b=notS0, out=X[0]);
}